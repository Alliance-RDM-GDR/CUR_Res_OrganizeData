---
title: "Traitement et organisation des données de recherche"
subtitle: "un guide à l'usage des chercheurs"

author: 
  - name: L'équipe de curation du DFDR
    email: curators@frdr-dfdr.ca
    affiliations:
      - name: Digital Research Alliance of Canada

format: 
  html:
    embed-resources: true
    mermaid:
      theme: forest
      
  revealjs:
    footer: "Traitement et organisation des données de recherche - L'équipe de curation du DFDR"
    logo: "images/alliance_logo.png"
    theme: white
    transition: fade
    slide-number: true
    show-slide-number: all
    preview-links: auto
    mermaid:
      theme: forest
      mermaid-format: svg
    revealjs-plugins:
      - kapsner/audio-slideshow
    revealjs-args:
      - audio: true
      - audioAutoplay: false
      - audioControls: true
    
    
filters:
  - reveal-auto-agenda
auto-agenda:
  bullets: numbered
  heading: Agenda
  
  gfm:
    mermaid-format: svg

css: styles.css
bibliography: references.bib 
editor: source
---

# Principes pour la gestion des données de recherche

## Rendre les ensembles de données compréhensibles {.center} 

::::: {layout-ncol="2"}
:::: {#first-column}
:::{style="text-align: left;font-size: 70%"}
Les données de recherche existent sous de nombreuses formats ([tableaux]{style="color:orange;"}, [images]{style="color:magenta;"}, [vidéos]{style="color:red;"}, [texte]{style="color:gray;"}).

Dans tous les cas, il est essentiel que l’ensemble de données ait une [structure]{style="color:green;"} claire et soit [compréhensible]{style="color:green;"} par d'autres.
:::

::: callout-tip 
Essayez de vous mettre à la place d’un [observateur externe]{style="color:green;"} lorsque vous structurez les données.
:::
::::

:::: {#second-column}
::: {style="text-align: center; font-size: 70%"}
![Les autres ne comprennent généralement pas les données de recherche](images/DificultData.webp){fig-alt="Une illustration en noir et blanc représentant une personne frustrée, tenant sa tête et entourée de points d'interrogation. La personne est assise à une table couverte de grandes feuilles de calcul désorganisées, remplies de chiffres et de texte, symbolisant la difficulté à gérer et comprendre les données de recherche." fig-align="center" width="400" height="400"}
:::
::::
:::::

## 1. Utilisez conventions de nommage{.center}

Utilisez des [conventions de nommage](https://datamanagement.hms.harvard.edu/plan-design/file-naming-conventions) cohérentes qui décrivent fidèlement le contenu des fichiers et permettent l’interrelation entre eux :

:::{style="text-align: left;font-size: 80%"}
-   {{< bi card-image>}} [A1.tif]{style="color:red;"} {{< bi arrow-right>}} [Exp_Souris_Jour_Condition_Marqueur.tif]{style="color:green;"}
-   {{< bi file-earmark-spreadsheet>}} [CellsTable.xls]{style="color:red;"} {{< bi arrow-right>}} [Widefield_5x_Cortex_NeuN_Comptes.csv]{style="color:green;"}
:::

## 2. Prioriser formats de fichiers ouverts{.center}

Utilisez des formats de [fichiers appropriés et ouverts](https://osf.io/ena5p) pour améliorer l’accessibilité :

-   {{< bi card-image>}} [.tif]{style="color:green;"} pour les images (préserve les métadonnées).
-   {{< bi file-earmark-spreadsheet>}} [.csv]{style="color:green;"} pour les tableaux (format non propriétaire).
-   {{< bi file-bar-graph-fill>}} [.png ou .svg]{style="color:green;"} pour les graphiques (préserve la qualité).
-   {{< bi file-earmark-pdf-fill>}} [.txt ou .pdf]{style="color:green;"} pour la documentation (format non propriétaire).


## 3. Fournir des métadonnées complètes{.center} 

Utilisez des [métadonnées détaillées]{style="color:green;"} (fichiers README et dictionnaires de données/codebook) pour [contextualiser]{style="text-decoration: underline;"} et [décrire]{style="text-decoration: underline;"} les fichiers de recherche.

::: {style="text-align: center; font-size: 70%"}
![Exemple de codebook (https://domstat.med.ucla.edu/)](images/Codebook.jpg){fig-alt="Un tableau présentant un codebook pour un ensemble de données, avec des colonnes intitulées 'Nom de variable,' 'Description,' 'Type,' et 'Valeurs ou caractéristiques.' Le tableau définit des variables telles que l'identifiant du patient, le sexe, la date de la procédure, le groupe de traitement et les résultats cliniques, en précisant les types de données (numérique, date, caractère) et les significations des valeurs (ex. 1=Femme, 2=Homme). Ce codebook fournit une vue d'ensemble structurée des variables utilisées dans la gestion des données de recherche." fig-align="center" width="400" height="250"}
:::

## 4. Mettre en œuvre des flux de travail reproductibles{.center}

Mettez en place des [flux de travail reproductibles]{style="color:green;"} en utilisant le codage (R, Python) pour transformer les [données brutes]{style="text-decoration: underline;"} en données destinées à l’[analyse]{style="text-decoration: underline;"}.



::: callout-tip
Ces pratiques garantissent des ensembles de données [organisés, propres et validés]{style="color:green;"}.
:::


# Gestion des tableaux de données

## {{< bi file-earmark-spreadsheet>}} Les tableaux sont au cœur des données de recherche {.center}

::: {style="text-align: left;font-size: 70%"}
Bien qu'ils soient le type de fichier le plus courant (.xls) pour l'enregistrement et le stockage des données, les tableaux sont les objets les plus [mal organisés et inutilisables]{style="color:red;"} en recherche.
:::

::::: {layout-ncol="2"}
:::: {#first-column}
::: {style="text-align: center;font-size: 50%"}
![Source : https://dansteer.wordpress.com/](images/BadTable1.webp){fig-alt="Exemple de mauvais formatage de données, illustrant une feuille de calcul avec des cellules combinées et des variables différentes dans la même colonne." fig-align="center" width="600" height="300"}
:::
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 50%"}
![Avec l'aimable autorisation d'un chercheur](images/BadTable2.png){fig-alt="Exemple de mauvais formatage des données, présentant une feuille de calcul avec des cellules combinées et des variables différentes dans la même colonne. On peut également observer une combinaison de chiffres et de données numériques dans la même feuille." fig-align="center" width="600" height="300"}
:::
::::
:::::

## Exemples issus de recherches publiées{.center}

::::: {layout-ncol="2"}
:::: {#first-column}
::: {style="text-align: center;font-size: 50%"}
![Zhao et al. (2024). Nature Comm. DOI: 10.1038/s41467-024-50836-6](images/BadTable2_Zhao(2024)_NatureComm.png){fig-alt="Exemple de mauvais formatage de données, présentant une feuille de calcul avec des cellules combinées et des variables différentes dans la même colonne. On peut également observer une combinaison de chiffres et de données numériques dans la même feuille." fig-align="center" width="400" height="400"}
:::
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 50%"}
![Balinda et al. (2024). Nature Comm. DOI: doi.org/10.1038/s41467-024-50558-9](images/BadTable2_Balinda(2024)_NatureComm.png){fig-alt="Exemple de mauvais formatage de données, présentant une feuille de calcul avec des cellules combinées et des variables différentes dans la même colonne. Nous voyons également des codes de couleur qui ne doivent pas être définis dans une feuille de calcul de données." fig-align="center" width="400" height="400"}
:::
::::
:::::

## Exemples de [Crystal Lewis (2024)](https://datamgmtinedresearch.com/){.center}

::::: {layout-ncol="2"}
:::: {#first-column}
::: {style="text-align: center;font-size: 50%"}
![Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-3.PNG){fig-alt="Deux tableaux comparant des structures de données. Le tableau de gauche, intitulé 'Pas un rectangle,' présente une structure irrégulière avec un alignement incohérent des noms de variables et des valeurs, rendant son interprétation difficile. Le tableau de droite, intitulé 'Rectangle,' suit un format structuré avec des colonnes clairement définies pour l'ID étudiant, l'âge en mois, le score brut de lecture et le score standardisé de lecture. Cette comparaison met en évidence l'importance d'un format de données bien organisé pour la gestion des données de recherche."}

![Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-4.PNG){fig-alt="Deux tableaux comparant la cohérence des valeurs de colonnes. Le tableau de gauche, intitulé 'Valeurs de colonnes incohérentes,' contient des formats de date variés (ex. '10-12-2023,' 'Oct. 15, 2023,' 'September 15') et des valeurs catégoriques incohérentes pour l'achèvement du sondage ('y,' 'Yes,' 'Y,' 'no'). Le tableau de droite, intitulé 'Valeurs de colonnes cohérentes,' normalise les dates au format 'AAAA-MM-JJ' et unifie les réponses catégoriques en 'y' et 'n.' Cette comparaison illustre les meilleures pratiques pour garantir la clarté et la fiabilité des données."}
:::
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 50%"}
![Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-5.PNG){fig-alt="Deux tableaux comparant les formats de variables. Le tableau de gauche, intitulé 'Variable de type caractère,' contient des valeurs d'âge incohérentes : un espace avant '24' fait de cette entrée un texte, '49 years old' ajoute du texte inutile, et '36..0' contient une erreur de formatage. Le tableau de droite, intitulé 'Variable numérique,' stocke correctement les âges sous forme numérique sans espace, texte superflu ou erreurs de formatage. Cette comparaison met en évidence l'importance du nettoyage des données numériques pour une analyse correcte."}

![Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-6.PNG){fig-alt="Deux tableaux comparant la structuration des données. Le tableau de gauche, intitulé 'Deux informations dans une seule variable,' combine le nombre d'incidents et le nombre total d'inscrits en une seule colonne (ex. '55/250'), rendant l'analyse plus difficile. Le tableau de droite, intitulé 'Deux informations dans deux variables,' sépare ces valeurs en colonnes distinctes : 'incident' pour le nombre d'incidents et 'enrollment' pour le nombre d'inscrits. Cette structuration facilite l'analyse et suit les bonnes pratiques de gestion des données."}

:::
::::
:::::

## Exemples de [Crystal Lewis (2024)](https://datamgmtinedresearch.com/){.center}

::: {style="text-align: center;font-size: 50%"}
![Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-7.PNG){fig-alt="Deux tableaux comparant l'utilisation de valeurs explicites et implicites. Le tableau de gauche, intitulé 'Valeurs non explicites,' omet la répétition des identifiants d'école et des années, supposant qu'ils s'appliquent à plusieurs lignes, ce qui peut causer des erreurs lors du traitement des données. Le tableau de droite, intitulé 'Valeurs explicites,' répète ces informations pour chaque ligne, garantissant une clarté accrue et une meilleure lisibilité pour l'analyse." fig-align="center" width="500" height="200"}
:::

::: {style="text-align: center;font-size: 50%"}
![Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-8.PNG){fig-alt="Deux tableaux comparant l'utilisation explicite et implicite des variables. Le tableau de gauche, intitulé 'Variables non explicites,' utilise la couleur des cellules pour indiquer les conditions de traitement, ce qui peut être mal interprété ou perdu dans l'analyse. Le tableau de droite, intitulé 'Variables explicites,' ajoute une colonne 'treatment' avec des valeurs numériques (0 ou 1) pour indiquer explicitement la condition de traitement. Cette approche garantit une meilleure transparence des données et facilite leur analyse." fig-align="center" width="600" height="200"}
:::


## {{< bi file-earmark-spreadsheet>}} Construire des tableaux de données accessibles{.center} 

::::: {layout-ncol="2" layout-valign="center"}
:::: {#first-column}
::: {style="text-align: center;font-size: 60%"} 
![Un tableau de données typique au format long organise l'information en lignes et colonnes](images/GoodTable.png){fig-alt="Un tableau bien structuré affichant des données expérimentales pour différentes souris. Les colonnes incluent 'MouseID,' 'DPI' (jours après la lésion), 'Condition' (MCAO), 'Région' (Contra, Ipsi, Peri), ainsi que les comptages cellulaires pour NeuN, Ki67 et BrdU. La colonne 'MouseID' est surlignée en orange pour la distinguer visuellement. Ce tableau illustre une organisation claire des données, essentielle pour leur analyse en recherche." fig-align="left" width="500" height="300"}
:::
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 60%"}
### Colonnes
- {{< bi file-earmark-person-fill>}} [Variables d’identification]{style="color:green;"} : ID animal, point temporel, condition (facteurs ou caractères).
- {{< bi dropbox>}} [Variables d’analyse]{style="color:green;"} : score, surface, nombre de cellules, etc. (numérique ou catégoriel).
- {{< bi device-ssd-fill>}} [Variables créées]{style="color:green;"} lors du traitement (proportions, ratios, etc.).

### Lignes
- {{< bi clipboard-data-fill>}} [Valeurs des variables]{style="color:green;"} : entrées pour chaque colonne (variable). Chaque ligne correspond à une observation unique.
:::
::::
:::::

## {{< bi file-earmark-spreadsheet>}} Formats de tableaux larges{.center}

::::: {layout-ncol="2" layout-valign="center"}
:::: {#first-column}
::: {style="text-align: center;font-size: 60%"} 
![Un tableau de données typique au format large, extrait de Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-14.PNG){fig-alt="Un diagramme illustrant la transformation entre les formats de données long et large. Le tableau de gauche représente un format long où chaque ligne contient un 'pays,' une 'année' et une valeur associée. Le tableau de droite montre le format large, où les années sont réparties sur plusieurs colonnes (ex. 'yr1960', 'yr1970', 'yr2010'). La fonction `pivot_wider()` transforme les données en format large, tandis que `pivot_longer()` effectue l'opération inverse, facilitant l'analyse des données longitudinales." fig-align="left" width="600" height="350"}
:::
::::

:::: {#second-column}
::: {style="text-align: left;font-size: 70%"} 
Dans un tableau au [format large]{style="color:green;"}, [chaque sujet]{style="text-decoration: underline;"} occupe une [seule ligne]{style="text-decoration: underline;"} et les variables sont disposées en colonnes distinctes : [sujet]{style="color:orange;"}, [Id1, Id2]{style="color:red;"}, [Var1, Var2]{style="color:gray;"}, [Temps 1, Temps 2, Temps 3]{style="color:magenta;"}.
:::

:::{.callout-tip .smaller}
Ici, les colonnes représentent des [réponses ou prédicteurs]{style="color:green;"} dans une régression. Exemple :   

[Cells_7D]{style="color:green;"} ~ [Cells_2D + Cells_3D]{style="color:magenta;"}.
::: 
::::
:::::

## {{< bi file-earmark-spreadsheet>}} Formats de tableaux longs 

::::: {layout-ncol="2" layout-valign="center"}
:::: {#first-column}
::: {style="text-align: center;font-size: 60%"} 
![Un tableau de données typique au format long, extrait de Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-15.PNG){fig-alt="Diagramme illustrant la transformation de données longitudinales de tableaux séparés en un format long. Les tableaux du haut et du bas représentent les « données de la première vague » et les « données de la deuxième vague », chacune contenant les mesures de l'anxiété (« anx1 » et “anx2”) pour les étudiants identifiés par « stu_id ». Le tableau de droite, intitulé « Long format data », restructure les données en ajoutant une colonne « vague », chaque ligne représentant les mesures d'un étudiant à une vague spécifique. Cette transformation optimise l'ensemble des données pour une analyse longitudinale et un stockage efficace." fig-align="left" width="700" height="300"}
:::
::::

:::: {#second-column}
::: {style="text-align: left;font-size: 65%"} 
Dans un tableau au [format long]{style="color:green;"}, [chaque sujet]{style="text-decoration: underline;"} occupe [plusieurs lignes]{style="color:green;"} et possède des observations associées sur [différentes lignes :]{style="text-decoration: underline;"}    

[sujet]{style="color:orange;"} (répété), [Id1, Id2]{style="color:red;"} (répété), [Temps (1, 2, 3)]{style="color:magenta;"}.
:::

::: {.callout-tip .smaller}
Utile pour l’analyse des [données temporelles]{style="color:green;"}, regroupant différentes variables de condition en une seule colonne. [Exemple :]{style="text-decoration: underline;"}   

[Cells]{style="color:green;"} ~ [PointTemps (1D, 2D, 3D)]{style="color:magenta;"}.  

Le format long est généralement privilégié pour l’analyse des données.
::: 
::::
:::::

## {{< bi balloon-heart-fill>}} Le meilleur dans tout ça... {.center}  

::: {style="text-align: left;font-size: 80%"} 
Vous pouvez utiliser R (ou Python) et [Quarto](https://quarto.org/) pour convertir un tableau du format long au format large, et inversement.  
:::

::: {style="text-align: center;font-size: 60%"} 
![Conversion format long à large (https://tavareshugo.github.io/)](images/LongToWide.png){fig-alt="Diagramme illustrant la transformation entre les formats de données long et large en utilisant `pivot_wider()` et `pivot_longer()`. Le tableau de gauche représente des données au format long, où chaque ligne contient un « pays », une “année” et une valeur « métrique » correspondante. Le tableau de droite représente des données au format large, où les valeurs de l'année sont réparties sur plusieurs colonnes (par exemple, “yr1960”, “yr1970”, “yr2010”), chacune contenant la valeur métrique correspondante pour chaque pays. La fonction `pivot_wider()` convertit le format long en format large, tandis que `pivot_longer()` inverse le processus, démontrant ainsi la flexibilité de la mise en forme des données dans R." fig-align="center" width="400" height="300"}
:::

::: {.callout-tip .smaller}
Consultez les [tutoriels R]((https://shanghai.hosting.nyu.edu/data/r/reshaping.html)) et [python](https://pandas.pydata.org/docs/getting_started/intro_tutorials/07_reshape_table_layout.html).
:::

## {{< bi file-earmark-font-fill>}} Fournir des métadonnées (fichiers README){.center}    

::::: {layout-ncol="2" layout-valign="center"}
:::: {#first-column}
::: {style="text-align: left;font-size: 80%"} 
- Les ensembles de données sont [incompréhensibles]{style="color:red;"} s’ils ne sont pas accompagnés de dictionnaires de données ou de codebooks [(.txt, .md, .csv)]{style="color:green;"} décrivant les [variables]{style="color:green;"} des tableaux de données. Cela peut également prendre la forme d’un [fichier README]{style="color:green;"} [(.txt, .md)]{style="color:green;"} qui décrit leur contexte et leur contenu.
:::
::::

::::{#second-column}
::: {style="text-align: center;font-size: 70%"} 
![Exemple de fichier README](images/DescriptiveMetadata_czi.png){fig-alt="Une capture d'écran de métadonnées descriptives pour un ensemble de données sur la réactivité des cellules PDGFR-B+ dans un modèle murin d'ischémie cérébrale. Le texte détaille l'origine des images, les conventions de nommage des fichiers, le contenu des dossiers et les conditions expérimentales. Il explique également le processus de génération des images à partir des fichiers Zenodo, leur traitement avec CellProfiler et fournit des liens vers des articles de recherche et des dépôts OSF pour plus d’informations." fig-align="center" width="600" height="500"}
:::
::::
:::::

# Gestion des images

## {{< bi card-image>}} Lors de la gestion des images, veuillez considérer : {.center} 

::::: {layout-ncol="2" layout-valign="center"}
:::: {#first-column}
::: {style="text-align: center;font-size: 60%"} 
![Manrique-Castano et al. (2024). DOI: DOI 10.17605/OSF.IO/3VG8J](images/BrainStaining.png){fig-alt="Image de microscopie à fluorescence d'une section coronale de cerveau de souris. La section est marquée par des marqueurs d’immunofluorescence" fig-align="center" width="500" height="250"}
:::
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 50%"}
- {{< bi card-image>}} Convertissez les [fichiers propriétaires]{style="color:red;"} (ex. .czi) en [formats ouverts]{style="color:green;"} sans compression (.tif).
- {{< bi gear-fill>}} Partagez les métadonnées [techniques]{style="color:green;"} (paramètres d’acquisition) et [descriptives]{style="color:green;"} (contexte et contenu) avec les images.
- {{< bi code-square>}} Documentez toutes les procédures appliquées aux images (redimensionnement, soustraction de fond, etc.), par exemple en utilisant un [logiciel de codage/script]{style="color:green;"}.
- {{< bi code-square>}} Réalisez les analyses en utilisant un [logiciel de codage/script]{style="color:green;"} pour garantir la reproductibilité. [Évitez l’analyse manuelle]{style="color:red;"}.
:::
::::
:::::

:::{.callout-tip .smaller}
Consultez cette [ressource](https://github.com/Alliance-RDM-GDR/RDM_BioimageFAIR) pour plus d’informations sur la gestion et le partage des images.
:::

## {{< bi card-image>}} Convertir les images en formats ouverts{.center} 

::::: {layout-ncol="2" layout-valign="center"}
:::: {#first-column}
::: {style="text-align: center;font-size: 60%"} 
![Script FIJI pour enregistrer des images .czi en tiff. Extrait de Manrique-Castano et al. (2024). DOI: DOI 10.17605/OSF.IO/3VG8J](images/Transform_czi-tif.png){fig-alt="Capture d’écran d’un script macro ImageJ écrit en JavaScript. Le script automatise la conversion des fichiers d’imagerie microscopique `.czi` en format `.tif`. Il demande à l’utilisateur de sélectionner un répertoire, récupère la liste des fichiers `.czi`, et traite chaque fichier en l’ouvrant avec le Bio-Formats Importer. Il extrait ensuite deux canaux d’image et les enregistre séparément en tant que fichiers `.tif` dans un dossier 'Images_Tiff'. Le script garantit un traitement systématique de tous les fichiers et ferme toutes les fenêtres après l’exécution." fig-align="left" width="500" height="300"}
:::
::::

:::: {#second-column}
::: {style="text-align: left;font-size: 70%"} 
Vous pouvez facilement [convertir]{style="color:green;"} vos fichiers propriétaires (.czi) en formats ouverts (.tif) en utilisant, par exemple, des [scripts FIJI]{style="color:green;"} [(lien)](https://github.com/Alliance-RDM-GDR/RDM_OrganizeData/blob/main/resources/Transform_czi-tif.ijm).
:::
::: {.callout-caution}
Enregistrer des images .czi en .tif avec FIJI entraîne une [perte de métadonnées]{style="color:red;"} (archivées dans le fichier .czi). 
::: 
::::
:::::

## Suivre les métadonnées{.smaller} 

::::: {layout-ncol="2"}
:::: {#first-column}
#### {{< bi gear-fill>}} [Techniques]{style="color:gray;"}

Exportez les métadonnées techniques des images propriétaires (ex. .czi) en fichiers [.txt ou .csv]{style="color:green;"} (cela peut être appliqué à toutes les images d'un lot).  

::: {style="text-align: center;font-size: 70%"} 
![Exemple de métadonnées techniques dans FIJI : *image -> show info*](images/TechnicalMetadata_czi.png){fig-alt="Capture d’écran de la visionneuse de métadonnées affichant les métadonnées techniques d’un fichier d’imagerie microscopique `.czi`. Le tableau des métadonnées comprend des clés et des valeurs telles que 'BitsPerPixel' (14), 'DimensionOrder' (XYZCT), et 'PixelType' (uint16). D’autres détails indiquent que l’image contient 4 canaux (SizeC), un seul point temporel (SizeT = 1), des dimensions de 2752x2208 pixels (SizeX, SizeY), et un seul plan Z (SizeZ = 1). Ces métadonnées fournissent des informations essentielles pour le traitement et l’analyse d’images en microscopie de recherche." fig-align="center" width="300" height="300"}
:::
::::

:::: {#second-column}
#### {{< bi file-earmark-pdf-fill>}} [Descriptives]{style="color:orange;"}

Générez des fichiers README descriptifs pour expliquer la [provenance et les conventions de nommage]{style="color:green;"} des images.

::: {style="text-align: center;font-size: 70%"} 
![Exemple de [métadonnées descriptives](https://github.com/Alliance-RDM-GDR/RDM_OrganizeData/blob/main/resources/readme_images.txt)](images/DescriptiveMetadata_czi.png){fig-alt="Une capture d'écran de métadonnées descriptives pour un ensemble de données sur la réactivité des cellules PDGFR-B+ dans un modèle murin d'ischémie cérébrale. Le texte détaille l'origine des images, les conventions de nommage des fichiers, le contenu des dossiers et les conditions expérimentales. Il explique également le processus de génération des images à partir des fichiers Zenodo, leur traitement avec CellProfiler et fournit des liens vers des articles de recherche et des dépôts OSF pour plus d’informations." fig-align="center" width="400" height="330"}
:::
::::
:::::
# Organiser (et partager) les données

## Un paysage de recherche préoccupant

::: {style="text-align: left;font-size: 80%"} 
Nous vivons une pandémie de [recherche frauduleuse et irréproducible]{style="color:red;"}. 
:::

::::: {layout-ncol="2" layout-valign="center"}
:::: {#first-column}
::: {style="text-align: left;font-size: 60%"} 
![Augmentation du nombre d'articles rétractés au cours des trois dernières décennies](images/Economist_Retractions.png){fig-alt="Un graphique de The Economist intitulé 'Pants on fire,' illustrant le nombre cumulé d’articles scientifiques biomédicaux rétractés de 1996 à 2023. Le graphique montre une augmentation exponentielle des rétractations, dépassant 15 000 en 2023. Les données proviennent de Retraction Watch et couvrent 4 244 revues évaluées. Ce graphique met en évidence les préoccupations croissantes concernant l'intégrité scientifique et l'augmentation du nombre de publications rétractées au fil du temps." fig-align="left" width="450" height="450"}
:::
::::

:::: {#second-column}
:::{style="text-align: left;font-size: 70%"}
Ce paysage préoccupant exige que, en tant que [chercheurs responsables]{style="color:green;"}, nous appliquions de bonnes [pratiques de recherche]{style="text-decoration: underline;"} pour partager les données et les procédures d’analyse. 
:::
::::
:::::


## Définir la structure d’un ensemble de données {.center} 

Un [ensemble de données structuré]{style="color:green;"} est la clé pour le comprendre et le réutiliser.

::::: {layout-ncol="2"}
:::: {#first-column}
::: {style="text-align: center;font-size: 70%"}
![Source : pexels.com](images/Matryoska.jpeg){fig-alt="Un étalage de poupées russes traditionnelles Matriochkas, également appelées poupées gigognes, peintes dans des couleurs vives."}
:::
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 70%"}
![Structure des fichiers](images/files.png){fig-alt="Un arbre de répertoires structuré représentant un projet de recherche organisé. Les dossiers de premier niveau incluent 'Code,' contenant des scripts R pour le nettoyage et l'analyse des données ('clean_raw_data.r,' 'analysis_1.r,' 'analysis_2.r'); 'Data,' divisé en 'Raw_data' (avec les fichiers bruts 'file_a.raw' et 'file_b.raw') et 'Processed_data' (contenant les fichiers CSV nettoyés 'file_a.csv' et 'file_b.csv'); 'Outputs,' qui comprend des sous-dossiers pour 'Figures' et 'Models'; ainsi qu'un fichier 'README.txt'. Cette organisation suit les bonnes pratiques pour la gestion des données de recherche." width="75%"}
:::
::::
:::::


## Principes pour structurer un ensemble de données {.center}

Définissez une structure pour les données au [début]{style="color:green;"} (idéal) ou [au cours]{style="color:green;"} de votre recherche.

::: callout-tip
## À considérer

-   {{< bi folder-fill >}} Dossiers/[structures de répertoires]{style="color:green;"}
-   {{< bi filetype-tiff >}} Réfléchissez aux [types/formats de fichiers]{style="color:green;"}
-   {{< bi file-earmark-font-fill >}} Établissez des [conventions de nommage]{style="color:green;"} logiques et descriptives
:::

Dans l’ensemble, assurez-vous que la structure des données est [logique et cohérente]{style="color:green;"}, compréhensible pour les utilisateurs externes.


## {{< bi diagram-2-fill >}} Explorer l’arborescence des dossiers {.center}

::::: {layout-ncol="2" layout-valign="center"}
:::: {#first-column}
[TIER 4.0](https://www.projecttier.org/tier-protocol/protocol-4-0/root/) est un [modèle de projet]{style="color:green;"} conçu pour standardiser les ensembles de données.

[Téléchargez](https://github.com/Alliance-RDM-GDR/RDM_DepositingData/blob/main/resources/TIER4.0_DatasetTemplate.zip) la structure du projet et adaptez-la à des cas spécifiques.

::::

:::: {#second-column}
::: {style="text-align: center;font-size: 50%"}
![Arborescence des dossiers](images/tier.png){fig-alt="Une structure de répertoires hiérarchique suivant le protocole TIER 4.0 pour l'organisation des données de recherche. Le dossier racine 'Project/' contient des documents clés tels que 'The Read Me File' et 'The Report.' Le dossier 'Data/' est divisé en 'InputData/' (avec les sous-dossiers 'Input Data Files' et 'Metadata,' incluant 'Data Sources Guide' et 'Codebooks'), 'AnalysisData/' (avec 'Analysis Data Files' et 'The Data Appendix') et 'IntermediateData/'. Le dossier 'Scripts/' comprend des sous-dossiers pour 'ProcessingScripts/', 'DataAppendixScripts/', 'AnalysisScripts/', ainsi que 'The Master Script.' Enfin, le dossier 'Output/' contient 'DataAppendixOutput' et 'Results.' Cette organisation garantit la transparence et la reproductibilité dans la gestion des données de recherche." width="40%"}
:::
::::
:::::

## {{< bi folder-fill >}} Données brutes {.center}

Un dossier [Data_Raw/]{style="color:orange;"} peut contenir :

::::: {layout-ncol="2" layout-valign="center"}
:::: {#first-column}

-   [Images originales]{style="color:green;"} (.tiff, .czi)
-   [Fichiers de sortie]{style="color:green;"} des appareils de mesure (.txt, .csv)
-   [Feuilles d’enregistrement]{style="color:green;"} originales (.png, .csv, .xlsx)
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 50%"}
![Arborescence des dossiers](images/data_raw.png){fig-alt="Capture d'écran d'un répertoire structuré contenant des données organisées." width="90%"}
:::
::::
:::::


## Données brutes - métadonnées {.center}

Incluez des [métadonnées/]{style="color:orange;"} permettant de comprendre et de réutiliser le contenu des fichiers :

- {{< bi file-earmark-font-fill >}} Détails méthodologiques et techniques.

- {{< bi file-earmark-font-fill >}} Codebooks / dictionnaires de données expliquant les variables et unités. Ils peuvent être des fichiers [.txt](https://osf.io/9n3gh) ou [.csv, xlxs](https://osf.io/925sh).

- {{< bi filetype-tiff >}} Paramètres d’instrumentation et d’acquisition pour les images.

## {{< bi folder-fill >}} Données d’analyse (traitées){.center}

Un dossier [Data_Analysis/]{style="color:orange;"} contient des [fichiers traités]{style="color:green;"} utilisés pour générer les résultats de la recherche.

::::: {layout-ncol="2"}
:::: {#first-column}

- Métadonnées similaires aux données brutes.

- Fichiers [Data_Appendix]{style="color:green;"} présentant des statistiques descriptives de base ou des distributions de données.

::::

:::: {#second-column}
::: {style="text-align: center;font-size: 50%"}
![Arborescence des dossiers](images/data_processed.png){fig-alt="Capture d'écran d'un répertoire structuré contenant des données traitées organisées." width="90%"}
:::
::::
:::::

## {{< bi folder-fill >}} Données intermédiaires (optionnel){.center}

Un dossier [Data_Intermediate/]{style="color:orange;"} {{< bi folder-fill >}} peut contenir des données intermédiaires traitées ou des fichiers prétraités dans le cadre d’un pipeline d’analyse. Par exemple, des "masques" d’image et des classificateurs d’apprentissage automatique utilisés pour un traitement ultérieur des images.


## {{< bi code-square >}} Le script est la voie à suivre 

::: {style="text-align: left;font-size: 80%"}
Bien que la plupart des chercheurs soient plus à l’aise avec les interfaces graphiques (GUI), le paysage actuel de la recherche exige l'utilisation de [scripts et de code]{style="color:green;"} pour garantir la reproductibilité des résultats de recherche.
:::

![](images/Theway.png){fig-alt="Un mème humoristique sur le thème de la Guerre des étoiles comparant différents langages de programmation. L'image est divisée en trois sections, chacune montrant un personnage de Star Wars brandissant un sabre laser. À gauche, Luke Skywalker, avec un logo de langage de programmation « R », tient un sabre laser bleu. Au centre, Kylo Ren brandit un sabre laser rouge à garde transversale portant le logo GraphPad. À droite, Mace Windu, associé au logo Python, tient un sabre laser violet. Ce mème dépeint avec humour les rôles perçus des logiciels libres dans le paysage de la recherche." fig-align="center"}

::: callout-tip
{{< bi code-square >}} Le codage doit être considéré comme une [compétence essentielle]{style="color:green;"} au même titre que d’autres méthodes de recherche.
:::

## Outils pour gérer le code et les scripts {.center}

::::: {layout-ncol="2" layout-valign="center"}
:::: {#first-column}

### {{< bi code-square>}} R-Studio/Quarto (R + Python)
::: {style="text-align: center;font-size: 100%"} 
![Écran R-Studio/Quarto](images/R-studio_Screen.jpg){fig-alt="Capture d’écran d’une session RStudio affichant un carnet d’analyse de données Quarto." fig-align="center" width="500" height="300"}
:::
::::

:::: {#second-column}
### {{< bi github>}} GitHub (Contrôle de version)
::: {style="text-align: center;font-size: 100%"} 
![Écran GitHub](images/GitHub_screen.jpg){fig-alt="Capture d’écran d’un dépôt GitHub nommé 'Stroke_PDGRF-B_Reactivity,' issu d’un fork de 'elalilab/Stroke_PDGRF-B_Reactivity.' Le dépôt est public et contient des répertoires tels que 'Data_Processed' ainsi que plusieurs fichiers Quarto Markdown (`.qmd`) liés à l’analyse de données" fig-align="center" width="500" height="300"}
:::
::::
:::::

## Avec R-Studio (R et Python), vous pouvez {.center}

::::: {layout-ncol="2" layout-valign="center"}
:::: {#first-column}

### {{< bi code-square>}} R-Studio/Quarto (R + Python)
::: {style="text-align: center;font-size: 100%"} 
![Écran R-Studio/Quarto](images/R-studio_Screen.jpg){fig-alt="Screenshot of an R-Studio session displaying a Quarto data analysis notebook." fig-align="center" width="500" height="300"}
:::
::::

:::: {#second-column}
:::{style="text-align: left;font-size: 70%"}
- {{< bi file-earmark-spreadsheet-fill>}} Manipuler des [tableaux de données et variables](https://github.com/elalilab/Stroke_PDGFR-B_Reactivity/blob/main/Widefield_10x_ROIs_CD31-Pdgfrb_Coloc.qmd) avec R et le package [Tidyverse](https://www.tidyverse.org/).  

- {{< bi images>}} Analyser des [images](https://github.com/elalilab/Stroke_PDGFR-B_Reactivity/blob/main/Confocal_40x_ROIs_Pdgfrb_Morpho_BatchScript.qmd) avec Python et [skimage](https://scikit-image.org/). 

- {{< bi wallet-fill>}} Traiter des fichiers et données de [cytométrie en flux](https://github.com/elalilab/Stroke_PDGFR-B_Reactivity/blob/main/FlowCytometry_Pdgfrb_Processing.qmd) avec R et [FlowCore](https://bioconductor.org/packages/release/bioc/html/flowCore.html) de [BioConductor](https://bioconductor.org/).

- {{< bi bandaid>}} Analyser des données de [RNA-seq](https://www.bioconductor.org/packages/release/bioc/vignettes/DESeq2/inst/doc/DESeq2.html) avec R et [DESeq2](https://bioconductor.org/packages/release/bioc/html/DESeq2.html) de [BioConductor](https://bioconductor.org/).

- {{< bi bar-chart-line-fill>}} Effectuer des [modélisations statistiques avancées](https://github.com/elalilab/Stroke_PDGFR-B_Reactivity/blob/main/Widefield_5x_Ipsilateral_Gfap_IntDen.qmd) avec [brms](https://paulbuerkner.com/brms/).

- Et bien plus encore...
:::
::::
:::::

## Suivez les versions avec un contrôle de version {.center}

::::: {layout-ncol="2" layout-valign="center"}
:::: {#first-column}
::: {style="text-align: center;font-size: 100%"} 
![Écran GitHub](images/GitHub_screen.jpg){fig-alt="Capture d’écran d’un dépôt GitHub nommé 'Stroke_PDGRF-B_Reactivity,' issu d’un fork de 'elalilab/Stroke_PDGRF-B_Reactivity.' Le dépôt est public et contient des répertoires tels que 'Data_Processed' ainsi que plusieurs fichiers Quarto Markdown (`.qmd`) liés à l’analyse de données" fig-align="center" width="500" height="300"}
:::
::::

:::: {#second-column}
:::{style="text-align: left;font-size: 70%"}
Avec [GitHub]{style="color:magenta;"} {{< bi github>}} ou [GitLab]{style="color:magenta;"} {{< bi gitlab>}}, vous pouvez :

- {{< bi database-fill-check>}} [Stocker]{style="color:green;"} votre code et vos données en toute sécurité et les [partager]{style="color:green;"} avec des collaborateurs et le public.

- {{< bi subtract>}} Conserver un [historique des modifications]{style="color:green;"} et versionner votre code (v 1.0, 1.2, 2.0).

- {{< bi folder-plus>}} [Lier/rendre]{style="color:green;"} votre code sur différentes plateformes (ex. [Open Science Framework Repository](https://osf.io/)).

- {{< bi clipboard2-pulse-fill>}} [Soutenir d'autres chercheurs]{style="color:green;"} et contribuer à une culture de [science ouverte et reproductible]{style="color:green;"}.

:::
::::
:::::

## Communautés internationales de soutien au codage {.center}

::::: {layout-ncol="2" layout-valign="center"}
:::: {#first-column}
::: {style="text-align: center;font-size: 100%"} 
![[R Ladies](https://github.com/rladies)](images/Rladies_logo.png){fig-alt="Logo de R-Ladies, une organisation mondiale qui promeut la diversité des genres dans la communauté du langage de programmation R. Le logo présente un 'R' stylisé en gris à l’arrière-plan, similaire au logo officiel du langage R, avec un 'R' violet en premier plan. En dessous, le mot 'Ladies' est écrit en gris. Ce logo symbolise une communauté inclusive et solidaire pour les femmes et les minorités de genre en science des données et en programmation avec R." fig-align="center" width="300" height="300"}
:::
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 100%"} 
![[Py Ladies](https://github.com/pyladies)](images/pyladies_logo.png){fig-alt="Logo de PyLadies, une organisation internationale qui promeut la diversité des genres dans la communauté du langage de programmation Python. Le logo représente une illustration stylisée d’une femme aux cheveux rouges, portant des lunettes noires et ayant des yeux expressifs avec de longs cils. Sous le visage, le mot 'pyladies' est écrit en police cursive de couleur crème sur une bannière rouge. Ce logo symbolise une communauté inclusive et solidaire pour les femmes et les minorités de genre en programmation Python et en science des données." fig-align="center" width="300" height="300"}
:::
::::
:::::

## {{< bi folder-fill >}} Scripts de traitement {.center}

::: {style="text-align: left;font-size: 90%"} 
Un dossier [Scripts_Processing]{style="color:orange;"} contient du code permettant de transformer les données brutes pour l’analyse :

-   Supprimer des variables (sous-ensemble du jeu de données)
-   Générer de nouvelles variables (effectuer des calculs, calculer des moyennes, etc.)
-   Combiner différentes sources d’informations (fusionner des tableaux ou des fichiers)
:::

::: callout-tip
Envisagez d’enregistrer les fichiers intermédiaires générés dans le dossier [Data_Intermediate/]{style="color:orange;"}.
:::

## {{< bi lightbulb-fill >}} À garder en tête {.center}

Les [conventions de nommage logiques]{style="color:green;"} sont essentielles pour relier les données brutes, les scripts de traitement et les données d’analyse.


## {{< bi folder-fill >}} Scripts d'analyse 

::::: {layout-ncol="2"}
:::: {#first-column}
::: {style="text-align: left; font-size: 80%"}
Le dossier [Scripts_Analysis]{style="color:orange;"} contient le code permettant de générer des résultats sous forme de :

-   {{< bi card-image >}} Images
-   {{< bi file-bar-graph-fill >}} Figures
-   {{< bi table >}} Tableaux
-   {{< bi calculator-fill >}} Modèles statistiques
:::
::::

:::: {#Second-column}
::: {style="text-align: center;font-size: 50%"}
![Arborescence des dossiers](images/scripts_processing.png){fig-alt="Capture d'écran d'un répertoire structuré contenant des données d'analyse organisées." width="90%"}
:::
::::
:::::

::: callout-tip
Ces scripts importent et traitent les [données d'analyse]{style="color:orange;"}.
:::

## {{< bi code-slash >}} Un script maître ? {.center}

Le dossier [Scripts/]{style="color:orange;"} peut également contenir un [script maître]{style="color:green;"} qui exécute tous les autres scripts, créant ainsi un pipeline entièrement automatisé.


## {{< bi folder-fill >}} Le dossier des résultats {.center}

::::: {layout-ncol="2"}
:::: {#first-column}

Le dossier [Results/]{style="color:orange;"} contient les fichiers générés par les scripts d'analyse sous forme de :

-   {{< bi card-image >}} Images
-   {{< bi file-bar-graph-fill >}} Figures
-   {{< bi table >}} Tableaux
-   {{< bi calculator-fill >}} Modèles statistiques
::::

:::: {#Second-column}
::: {style="text-align: center;font-size: 50%"}
![Arborescence des dossiers](images/output.png){fig-alt="Une capture d'écran d'un répertoire structuré contenant des figures/tracés de recherche" width="100%"}
:::
::::
:::::


# Rédiger un fichier README

## Fichiers README {.center} 

Les [fichiers README]{style="color:green;"} sont des guides pour [comprendre les ensembles de données et les tableaux]{style="color:green;"}.

::::: {layout-ncol="2" layout-valign="center"}
:::: {#first-column}
::: {style="text-align: center; font-size: 50%"}
![Source : https://github.com/twbs/bootstrap-rubygem](images/readme.webp){fig-alt="Capture d’écran d’un fichier README sur GitHub pour le 'Bootstrap Ruby Gem,' une bibliothèque utilisée dans les applications Ruby on Rails. Le README affiche un badge indiquant que la construction du gem est réussie et que la version 4.1.1 est disponible. Le document fournit des instructions d’installation, expliquant comment ajouter le gem au fichier Gemfile et assurer la compatibilité avec 'sprockets-rails.' Le guide fait référence à différents environnements, notamment Ruby on Rails et d’autres frameworks Ruby. La page contient des extraits de code formatés pour faciliter l’intégration dans un projet Rails." fig-align="center" width="700" height="300"}
:::
::::

:::: {#second-column}
::: {style="font-size: 80%;"}
Il existe des modèles et des ressources pour guider la rédaction des fichiers README :
- [Créer un fichier README](https://blog.datadryad.org/2023/10/18/for-authors-creating-a-readme-for-rapid-data-publication/)\
- [Readme.so](https://readme.so/)\
- [Readme.ai](https://readme-ai.streamlit.app/)
:::
::::
:::::

## Contenu d’un fichier README

:::{.r-fit-text}
En général, un fichier README pour un ensemble de données comprend :

-   {{< bi database-fill >}} Un [identifiant de l’ensemble de données]{style="color:green;"} contenant des informations telles que le titre, les auteurs, la date de collecte des données et les informations géographiques.
-   {{< bi folder-fill >}} Une [cartographie des fichiers/dossiers]{style="color:green;"} définissant le contenu et la hiérarchie des dossiers et sous-dossiers, ainsi que les conventions de nommage.
-   {{< bi gear-fill >}} Des [informations méthodologiques]{style="color:green;"} détaillant les méthodes de collecte/génération des données, les analyses effectuées et les conditions expérimentales.

-   {{< bi sd-card-fill >}} Un ensemble d’[instructions et logiciels]{style="color:green;"} pour ouvrir, manipuler et reproduire les pipelines de recherche.

-   {{< bi credit-card-2-front-fill >}} Des [informations sur le partage et l’accès]{style="color:green;"} précisant les autorisations et les conditions d’utilisation.
:::

::: {.callout-caution collapse="true"}
## À noter
Un ensemble de données est un [objet autonome]{style="text-decoration: underline;"}. Les informations méthodologiques [NE DOIVENT PAS]{style="color:red;"} être reléguées aux articles de recherche associés.
:::


# Liste de contrôle pour une recherche reproductible

## {{< bi card-checklist >}} Engagement envers la reproductibilité {.center}

::: {style="text-align: left;font-size: 80%"}
Un projet de recherche [reproductible]{style="color:green;"} répond aux critères suivants :

1.  {{< bi diagram-2-fill >}} Les [dossiers et fichiers]{style="color:green;"} sont organisés de manière [structurée]{style="text-decoration: underline;"} avec des [formats de fichiers ouverts]{style="color:green;"} (ex. CSV, TIFF) et des [conventions de nommage cohérentes]{style="color:green;"}.

2.  {{< bi code-square >}} Le traitement et l’analyse des données reposent sur des [flux de travail reproductibles]{style="color:green;"}. Les résultats (images, tableaux, figures, graphiques) sont partagés comme des [artéfacts indépendants]{style="text-decoration: underline;"}.

3.  {{< bi file-earmark-text-fill >}} Les fichiers [README et dictionnaires de données]{style="color:green;"} permettent de comprendre l’ensemble de données comme un objet autonome, en fournissant [le contexte, les méthodes, les étapes de traitement et les variables]{style="text-decoration: underline;"}.
:::

## En résumé {.center}

Un ensemble de données est un objet de recherche indépendant qui peut être utilisé (et cité) [indépendamment]{style="color:green;"} de l’article de recherche.

Mieux encore, considérez les articles comme des [compléments à votre ensemble de données !]{style="color:green;"}

::: callout-tip 
Consultez cette [ressource](https://github.com/Alliance-RDM-GDR/RDM_DepositingData) pour connaître les principes de dépôt des données dans les référentiels.
:::


## Ressources et soutien {.smaller}

::::: {layout-ncol="2"}
:::: {#first-column}
### Matériel de soutien

-   [Documentation DFDR](https://www.frdr-dfdr.ca/docs/fr/depot_de_donnees/)
-   [Ressources de formation](https://alliancecan.ca/fr/services/gestion-des-donnees-de-recherche/apprentissage-et-formation/ressources-de-formation) de l'Alliance
-   [RDMkit](https://rdmkit.elixir-europe.org/sharing)
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 100%"}
![Cette présentation est disponible [ici](https://github.com/Alliance-RDM-GDR/RDM_OrganizeData) (en anglais ou en français)](images/Presentation_QR-code.png){fig-alt="Une image de code QR qui redirige vers la présentation située dans un dépôt GitHub." fig-align="center" width="200" height="200"}
:::
::::
:::::

### Services de soutien

Contactez-nous pour vous assurer que vos données sont bien préparées et peuvent être efficacement partagées avec la communauté.

-   Email : rdm-gdr\@alliancecan.ca
-   [Site web du DFDR](https://www.frdr-dfdr.ca/repo/)


